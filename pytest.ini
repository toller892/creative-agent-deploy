[pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Output options
addopts =
    -p pytest_mock
    -v
    --tb=short
    --strict-markers
    --cov=src/creative_agent
    --cov-report=term-missing:skip-covered
    --cov-report=html
    --cov-report=json
    --cov-fail-under=10

# Markers
markers =
    smoke: Critical path tests that MUST always pass
    unit: Fast, isolated unit tests
    integration: Tests requiring services
    slow: Tests that take > 5 seconds
    ai: Tests requiring AI API keys
    asyncio: Async test functions

# Ignore patterns
norecursedirs = .git .venv tools scripts

# Asyncio mode
asyncio_mode = auto

[coverage:run]
branch = True
source = src/creative_agent
omit =
    tests/*
    */__pycache__/*
    */.venv/*
    src/creative_agent/schemas_generated/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False
